{{define "trello-card"}}
    {{if not .}}
    <div class="card text-center">
    {{else}}
        {{ if eq (len .TrelloDetails.TrelloBoards) 0 }}
        <div class="card text-center">
        {{else}}
            <div class="card text-center active">
        {{end}}
    {{end}}
        <span href="" class="tag">
            <div class="card-icon trello-logo ">
            </div>
            <h3 class="card-title"> Trello</h3>
            <div class="text-container">
                  <p class="card-content" data-title="">Link your trello board with etsy. A new order in etsy will
                      create a new card in your trello board.</p>
            </div>
          
            <div class="btn-wraper">
                {{if not .}}
                {{else}}
                    {{ if eq (len .TrelloDetails.TrelloBoards) 0 }}
                    <span  id="trello-authorize" class="btn btn-outline-primary card-btn ">Link to Trello</span>
                    {{else}}
                    <span  data-toggle="modal" data-target="#configurationModal"
                        class="btn btn-outline-success card-btn active">Configure</span>
                    {{end}}
                {{end}}
            </div>
        </a>
    </div>
    <div class="modal fade" id="configurationModal" tabindex="-1" 
        role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Trello Configuration</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <fieldset class="border-set">
                        <legend class="border-set regular">Trello Boards & Lists</legend>
                        <div class="row">
                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <div class="list-group" id="boards">
                                    {{range .TrelloDetails.TrelloBoards}}
                                        {{if eq .IsSelected true}}
                                            <button id="{{.ID}}" type="button" class="list-group-item active">{{.Name}}</button>
                                        {{else}}
                                            <button id="{{.ID}}" type="button" class="list-group-item">{{.Name}}</button>
                                        {{end}}
                                    {{end}}
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-6">
                                <div class="list-group" id="boardLists"></div>
                            </div>
                        </div>
                    </fieldset>
                    <div class="row mt-5">
                        <div class="col-md-10">
                            <fieldset class="border-set">
                                <legend class="border-set regular">Etsy fields to be used in trello card</legend>
                                <div class="checkbox checkbox-success">
                                    <input id="listing_desc" type="checkbox">
                                    <label for="listing_desc">
                                            Listing Description
                                                </label>
                                </div>
                                <div class="checkbox checkbox-success">
                                    <input id="listing_image" type="checkbox">
                                    <label for="listing_image">
                                            Listing Image
                                                </label>
                                </div>
                                <div class="checkbox checkbox-success">
                                        <input id="listing_buy_profile" type="checkbox">
                                        <label for="listing_buy_profile">
                                                Buyer public profile
                                                    </label>
                                    </div>
                                <div class="checkbox checkbox-success">
                                    <input id="listing_link" type="checkbox">
                                    <label for="listing_link">
                                            Link to etsy transaction
                                                </label>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" id="saveList" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>
{{end}}

